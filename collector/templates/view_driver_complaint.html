{% load static %}
{% include 'collectorheader.html' %}

<main class="content">
    <div style="width: 90%; max-width: 900px; margin: 0 auto; padding: 20px; background-color: #fff; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
        <h2 style="text-align: center; color: #333; font-size: 28px; font-weight: bold;">Your Submitted Complaints</h2>
        
        {% if complaints %}
            <table style="width: 100%; border-collapse: collapse; margin-top: 20px; background-color: #f9f9f9;">
                <thead>
                    <tr style="background-color: #007bff; color: #fff; text-align: left;">
                        <th style="border: 1px solid #ddd; padding: 12px;">Complaint</th>
                        <th style="border: 1px solid #ddd; padding: 12px;">Pickup Date</th>
                        <th style="border: 1px solid #ddd; padding: 12px;">Submitted On</th>
                        <th style="border: 1px solid #ddd; padding: 12px;">Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for complaint in complaints %}
                        <tr style="transition: background-color 0.3s ease;" 
                            onmouseover="this.style.backgroundColor='#e6f7ff';" 
                            onmouseout="this.style.backgroundColor='';">
                            
                            <!-- Complaint Text -->
                            <td style="border: 1px solid #ddd; padding: 10px; color: #333;">
                                {{ complaint.complaint_text }}
                            </td>
                            
                            <!-- Pickup Date -->
                            <td style="border: 1px solid #ddd; padding: 10px; color: #333;">
                                {{ complaint.pickup.pickup_date|date:"M d, Y" }}
                            </td>

                            <!-- Submitted On -->
                            <td style="border: 1px solid #ddd; padding: 10px; color: #333;">
                                {{ complaint.submitted_at|date:"M d, Y H:i" }}
                            </td>

                            <!-- Status -->
                            <td style="border: 1px solid #ddd; padding: 10px; color: #333;">
                                {% if complaint.is_solved %}
                                    <span style="color: #28a745; font-weight: bold;">Solved</span>
                                {% else %}
                                    <span style="color: #dc3545; font-weight: bold;">Pending</span>
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p style="text-align: center; font-size: 1.2rem; color: #888;">No complaints found.</p>
        {% endif %}
    </div>
</main>

{% include 'collectorfooter.html' %}
